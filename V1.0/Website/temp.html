<!DOCTYPE html>
<html>
<head> 
    <title>Patron Counts (Digiquatics v2) </title>
</head>
<body>
<input id = "date" type = "date"> 
<button type = "button" onclick="RunProgram()">Submit</button>
<ul id = "div1"> </ul>

</body>
<style> 
    .time {
        font-size: 10px; 
        color:red; 
        
    }
</style>
<script type="text/javascript" src="/eel.js"></script>
<script>
    var LWeekday = ["5:00AM","6:00AM","7:00AM","8:00AM","9:00AM","10:00AM","11:00AM","12:00AM","1:00PM","2:00PM","2:00PM","3:00PM","3:00PM","4:00PM","4:00PM","4:00PM","5:00PM","5:00PM","6:00PM","6:00PM","6:00PM","7:00PM","7:00PM","7:00PM","8:00PM","8:00PM",]
    var AWeekday = ["5:00AM","6:00AM","7:00AM","8:00AM","9:00AM","9:00AM","9:00AM","10:00AM","10:00AM","10:00AM","11:00AM","11:00AM","12:00PM","12:00PM","1:00PM","1:00PM","2:00PM","2:00PM","3:00PM","3:00PM","4:00PM","4:00PM","4:00PM","5:00PM","5:00PM","6:00PM","6:00PM","6:00PM","7:00PM","7:00PM","8:00PM","8:00PM",]
    var LFriday = ["5:00AM ","6:00AM ","7:00AM ","8:00AM ","9:00AM ","10:00AM ","11:00AM ","12:00PM ","1:00PM ","2:00PM ","2:00PM ","3:00PM ","3:00PM ","4:00PM ","4:00PM ","5:00PM ","5:00PM ","6:00PM ","6:00PM ","7:00PM ","7:00PM ",]
    var AFriday = ["5:00AM","6:00AM","7:00AM","8:00AM","9:00AM","9:00AM","9:00AM","10:00AM","10:00AM","10:00AM","11:00AM","11:00AM","12:00PM","12:00PM","1:00PM","1:00PM","2:00PM","2:00PM","3:00PM","3:00PM","4:00PM","4:00PM","5:00PM","5:00PM","6:00PM","6:00PM","7:00PM","7:00PM",]
    var LWeekend = ["8:00AM","9:00AM","10:00AM","10:00AM","11:00AM","12:00PM","12:00PM","1:00PM","1:00PM","2:00PM","2:00PM","3:00PM","3:00PM","4:00PM","4:00PM",]
    var AWeekend = ["8:00AM","9:00AM","10:00AM","10:00AM","10:00AM","11:00AM","11:00AM","12:00PM","12:00PM","1:00PM","1:00PM","2:00PM","2:00PM","3:00PM","3:00PM","4:00PM","4:00PM",]
    var LapCount = 0; 
    var ActCount =0; 
    function RunProgram() {
        var DateIn =  document.getElementById("date").value; 
        var DayofWekk = new Date(DateIn).getDay(); 
        console.log(document.getElementById("date").value); 
        console.log(DayofWekk); 
        if(DayofWekk == 0 ) { // Monday
            CreateInputs(26,32);  
            LapCount = 26; 
            ActCount = 32;   
        }
        if(DayofWekk == 1 ) { // Tuesday
            CreateInputs(26,32);  
            LapCount = 26; 
            ActCount = 32;   
        }
        if(DayofWekk == 2 ) { //Wednesday
            CreateInputs(26,32);  
            LapCount = 26; 
            ActCount = 32;   
        }
        if(DayofWekk == 3 ) { // Thursday 
            CreateInputs(26,32);  
            LapCount = 26; 
            ActCount = 32;   
        }
        if(DayofWekk == 4 ) { // Firday 
            CreateInputs(21,28);  
            LapCount = 21; 
            ActCount = 28;   
        }
        if(DayofWekk == 5 ) { // Sat
            CreateInputs(15,17);  
            LapCount = 15; 
            ActCount = 17;   
        }
        if(DayofWekk == 6 ) { // Sun 
            CreateInputs(15,17);  
            LapCount = 15; 
            ActCount = 17;   
        }

    }

    function CreateInputs(LapIn, ActIn) {
         
        console.log("LapIn");
        console.log(LapIn); 
        //Create the word LAP 
        const para2 = document.createElement("p");
        const node2 = document.createTextNode("Lap");
        para2.appendChild(node2);
        const element2 = document.getElementById("div1");
        element2.appendChild(para2);

        for(let x = 0; x< LapIn; x++) {
            console.log(x); 
            var Times = [];  
            var TDayofWekk = new Date(document.getElementById("date").value).getDay(); 
            if(TDayofWekk >= 0 && TDayofWekk <= 3) {
                Times = LWeekday; 
            } else if (TDayofWekk == 4) {
                Times = LFriday; 
            } else if (TDayofWekk >4) {
                Times = LWeekend; 
            }
            const current = document.createElement("p");
            current.textContent = Times[x];  
            current.className = "time"; 
            const doc = document.getElementById("div1");
            doc.appendChild(current)
            const OverallList = document.createElement("ul"); 
            doc.appendChild(OverallList); 
            CreateSingleInput("InputLap" + x.toString(),x); 
        }

        
        const para = document.createElement("p");
        const node = document.createTextNode("Activity");
        para.appendChild(node);

        const element = document.getElementById("div1");
        element.appendChild(para);
        for(let x = 0; x< ActIn; x++) {
            console.log(x); 
            var Times = [];  
            var TDayofWekk = new Date(document.getElementById("date").value).getDay(); 
            if(TDayofWekk >= 0 && TDayofWekk <= 3) {
                Times = AWeekday; 
            } else if (TDayofWekk == 4) {
                Times = AFriday; 
            } else if (TDayofWekk >4) {
                Times = AWeekend; 
            }
            const current = document.createElement("p");
            current.textContent = Times[x];  
            current.className = "time"; 
            const doc = document.getElementById("div1");
            doc.appendChild(current)
            CreateSingleInput("InputAct" + x.toString(),x); 
        }



        //create the button 
        const para1 = document.createElement("button");
        const node1 = document.createTextNode("RUN!!!");
        
        para1.appendChild(node1);

        const element1 = document.getElementById("div1");
        element1.appendChild(para1);
        para1.onclick = function() { SubmitALL();  };
        para1.id = "SUBMITALL"; 


    }
    function SubmitALL() {
        var AllValsLap = []; 
        for(let x = 0; x< LapCount; x++) {
            let temp = document.getElementById("InputLap" + x.toString()).value; 
            if(temp == '') {
                AllValsLap.push(0); 
            } else { 
                AllValsLap.push(temp); 
            }


        }
        console.log(AllValsLap); 

        var AllValsAct = []; 
        for(let x = 0; x< ActCount; x++) {
            let temp = document.getElementById("InputAct" + x.toString()).value; 
            if(temp == '') {
                AllValsAct.push(0); 
            } else { 
                AllValsAct.push(temp); 
            }


        }
        console.log(AllValsAct);

        var TempDate = document.getElementById("date").value; 
        TYear = TempDate.substring(0,4); 
        TMonth = TempDate.substring(5,7); 
        TDay = TempDate.substring(8,10); 
        TempDate = TMonth + "/" + TDay + "/" + TYear + " "; 
        eel.TakeDate(TempDate); 
        eel.OneTime(TempDate,  new Date(document.getElementById("date").value).getDay(), AllValsLap, AllValsAct); 

    }
    function CreateSingleInput(IdIn, CurIN) {
        const node = document.createElement("li"); 

        const para = document.createElement("input");    
        para.id = IdIn;
        const element = document.getElementById("div1");
        node.appendChild(para)

        element.appendChild(node);
    }

</script>


</html>
